<p class="line867" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;"><tt class="backtick">FolderService</tt><tt class="backtick"></tt>&nbsp;provides access to the folders that appear in the Software Library of the SAS Client. Folders enable users to organize software resources into a hierarchical structure and to define security permissions that control access to the contents of folders. Folders can contain packages, software policies, OS sequences, and subfolders. A subfolder does not inherit the contents or properties of its parent.<span class="anchor" id="line-1308"></span><span class="anchor" id="line-1309"></span></p><p class="line867" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;"></p><h2 id="Walking_the_folder_structure" style="color: rgb(0, 0, 0); letter-spacing: normal; text-transform: none; font-family: sans-serif;">Walking the folder structure</h2><span class="anchor" id="line-1310" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><span class="anchor" id="line-1311" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line862" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">Walking a folder structure is common operation so much so we'll define a helper function, a generator, to do this based on the semantics of the python&nbsp;<tt class="backtick"></tt><tt class="backtick">os.walk</tt><tt class="backtick"></tt>&nbsp;function.<span class="anchor" id="line-1312"></span><span class="anchor" id="line-1313"></span></p><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">folder.py<span class="anchor" id="line-1314"></span><span class="anchor" id="line-1315"></span><span class="anchor" id="line-1316"></span><span class="anchor" id="line-1317"></span><span class="anchor" id="line-1318"></span><span class="anchor" id="line-1319"></span><span class="anchor" id="line-1320"></span><span class="anchor" id="line-1321"></span><span class="anchor" id="line-1322"></span><span class="anchor" id="line-1323"></span><span class="anchor" id="line-1324"></span><span class="anchor" id="line-1325"></span><span class="anchor" id="line-1326"></span><span class="anchor" id="line-1327"></span><span class="anchor" id="line-1328"></span><span class="anchor" id="line-1-169"></span></p><div class="highlight python" style="color: rgb(0, 0, 0); font-family: sans-serif;"><div class="codearea" dir="ltr" lang="en" style="margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247);"><pre dir="ltr" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde" lang="en" style="border-width: initial; border-style: none; background-color: rgb(243, 245, 247); padding: 10pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="line"><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">pytwist.com.opsware.folder</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">FolderRef</span></span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_2"></span><span class="anchor" id="line-2-89"></span></span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_3"></span><span class="anchor" id="line-3-74"></span><span class="ResWord" style="color: rgb(160, 0, 0);">def</span> <span class="ID">walk</span>(<span class="ID">ts</span>, <span class="ID">path</span>):</span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_4"></span><span class="anchor" id="line-4-60"></span>    <span class="ID">pathref</span> = <span class="ID">ts</span>.<span class="ID">folder</span>.<span class="ID">FolderService</span>.<span class="ID">getFNode</span>(<span class="ID">path</span>)</span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_5"></span><span class="anchor" id="line-5-56"></span>    <span class="ID">children</span> = <span class="ID">ts</span>.<span class="ID">folder</span>.<span class="ID">FolderService</span>.<span class="ID">getChildren</span>(<span class="ID">pathref</span>)</span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_6"></span><span class="anchor" id="line-6-48"></span></span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_7"></span><span class="anchor" id="line-7-40"></span>    <span class="ID">sub_folders</span> = [<span class="ID">x</span> <span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">x</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">children</span> <span class="ResWord" style="color: rgb(160, 0, 0);">if</span> <span class="ResWord" style="color: rgb(160, 0, 0);">isinstance</span>(<span class="ID">x</span>,<span class="ID">FolderRef</span>)]</span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_8"></span><span class="anchor" id="line-8-37"></span>    <span class="ID">child_objs</span> = [<span class="ID">x</span> <span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">x</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">children</span> <span class="ResWord" style="color: rgb(160, 0, 0);">if</span> <span class="ResWord" style="color: rgb(160, 0, 0);">not</span> <span class="ResWord" style="color: rgb(160, 0, 0);">isinstance</span>(<span class="ID">x</span>,<span class="ID">FolderRef</span>)]</span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_9"></span><span class="anchor" id="line-9-32"></span>    <span class="ResWord" style="color: rgb(160, 0, 0);">yield</span> <span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">/</span><span class="String" style="color: rgb(0, 64, 128);">'</span>.<span class="ID">join</span>(<span class="ID">path</span>), <span class="ID">sub_folders</span>, <span class="ID">child_objs</span></span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_10"></span><span class="anchor" id="line-10-29"></span></span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_11"></span><span class="anchor" id="line-11-26"></span>    <span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">s</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">sub_folders</span>:</span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_12"></span><span class="anchor" id="line-12-25"></span>        <span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">i</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">walk</span>(<span class="ID">ts</span>, <span class="ID">path</span>+[<span class="ID">s</span>.<span class="ID">name</span>]):</span>
<span class="line"><span class="LineAnchor" id="CA-47ebfb938a9d42fa068df12230d6587614fdacde_13"></span><span class="anchor" id="line-13-22"></span>            <span class="ResWord" style="color: rgb(160, 0, 0);">yield</span> <span class="ID">i</span></span>
</pre></div></div><span class="anchor" id="line-1329" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><span class="anchor" id="line-1330" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line867" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;"></p><h2 id="Counting_items_in_a_folder_structure" style="color: rgb(0, 0, 0); letter-spacing: normal; text-transform: none; font-family: sans-serif;">Counting items in a folder structure</h2><span class="anchor" id="line-1331" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><span class="anchor" id="line-1332" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">To demonstrate the convenience of using the folder.walk function:<span class="anchor" id="line-1333"></span><span class="anchor" id="line-1334"></span></p><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">countFolderObjects.py<span class="anchor" id="line-1335"></span><span class="anchor" id="line-1336"></span><span class="anchor" id="line-1337"></span><span class="anchor" id="line-1338"></span><span class="anchor" id="line-1339"></span><span class="anchor" id="line-1340"></span><span class="anchor" id="line-1341"></span><span class="anchor" id="line-1342"></span><span class="anchor" id="line-1-171"></span></p><div class="highlight python" style="color: rgb(0, 0, 0); font-family: sans-serif;"><div class="codearea" dir="ltr" lang="en" style="margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247);"><pre dir="ltr" id="CA-b7fe48acceabc0454ddf9cc31f90c4e72103d641" lang="en" style="border-width: initial; border-style: none; background-color: rgb(243, 245, 247); padding: 10pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="line"><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">folder</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">walk</span></span>
<span class="line"><span class="LineAnchor" id="CA-b7fe48acceabc0454ddf9cc31f90c4e72103d641_2"></span><span class="anchor" id="line-2-90"></span><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">pytwist</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">twistserver</span></span>
<span class="line"><span class="LineAnchor" id="CA-b7fe48acceabc0454ddf9cc31f90c4e72103d641_3"></span><span class="anchor" id="line-3-75"></span><span class="ID">ts</span> = <span class="ID">twistserver</span>.<span class="ID">TwistServer</span>()</span>
<span class="line"><span class="LineAnchor" id="CA-b7fe48acceabc0454ddf9cc31f90c4e72103d641_4"></span><span class="anchor" id="line-4-61"></span><span class="ID">path</span> = <span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">Opsware/Tools/Agent Support</span><span class="String" style="color: rgb(0, 64, 128);">'</span></span>
<span class="line"><span class="LineAnchor" id="CA-b7fe48acceabc0454ddf9cc31f90c4e72103d641_5"></span><span class="anchor" id="line-5-57"></span><span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">dirname</span>, <span class="ID">subdirList</span>, <span class="ID">objectList</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">walk</span>(<span class="ID">ts</span>, <span class="ID">path</span>.<span class="ID">split</span>(<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">/</span><span class="String" style="color: rgb(0, 64, 128);">'</span>)):</span>
<span class="line"><span class="LineAnchor" id="CA-b7fe48acceabc0454ddf9cc31f90c4e72103d641_6"></span><span class="anchor" id="line-6-49"></span>    <span class="ResWord" style="color: rgb(160, 0, 0);">print</span> <span class="String" style="color: rgb(0, 64, 128);">"</span><span class="String" style="color: rgb(0, 64, 128);">%s</span><span class="String" style="color: rgb(0, 64, 128);"> : (sub-folders: </span><span class="String" style="color: rgb(0, 64, 128);">%s</span><span class="String" style="color: rgb(0, 64, 128);">, items: </span><span class="String" style="color: rgb(0, 64, 128);">%s</span><span class="String" style="color: rgb(0, 64, 128);">)</span><span class="String" style="color: rgb(0, 64, 128);">"</span> % (<span class="ID">dirname</span>, <span class="ResWord" style="color: rgb(160, 0, 0);">len</span>(<span class="ID">subdirList</span>), <span class="ResWord" style="color: rgb(160, 0, 0);">len</span>(<span class="ID">objectList</span>))</span>
</pre></div></div><span class="anchor" id="line-1343" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">Execution:<span class="anchor" id="line-1344"></span><span class="anchor" id="line-1345"></span><span class="anchor" id="line-1346"></span><span class="anchor" id="line-1347"></span><span class="anchor" id="line-1348"></span><span class="anchor" id="line-1349"></span><span class="anchor" id="line-1350"></span><span class="anchor" id="line-1351"></span></p><pre style="color: rgb(0, 0, 0); border-width: 1pt; border-style: solid; border-color: rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="anchor" id="line-1-21"></span>[root@dc1 FolderService]# ./countFolderObjects.py
<span class="anchor" id="line-2-19"></span>Opsware/Tools/Agent Support : (sub-folders: 4, items: 1)
<span class="anchor" id="line-3-13"></span>Opsware/Tools/Agent Support/yum : (sub-folders: 0, items: 42)
<span class="anchor" id="line-4-10"></span>Opsware/Tools/Agent Support/SLES : (sub-folders: 0, items: 2)
<span class="anchor" id="line-5-8"></span>Opsware/Tools/Agent Support/Java : (sub-folders: 0, items: 7)
<span class="anchor" id="line-6-7"></span>Opsware/Tools/Agent Support/Post-Install Customization : (sub-folders: 0, items: 1)</pre><span class="anchor" id="line-1352" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><span class="anchor" id="line-1353" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line867" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;"></p><h2 id="Locating_specific_items_in_a_folder_structure" style="color: rgb(0, 0, 0); letter-spacing: normal; text-transform: none; font-family: sans-serif;">Locating specific items in a folder structure</h2><span class="anchor" id="line-1354" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><span class="anchor" id="line-1355" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">This example walks down from a root folder locating all folders that contain a software policy printing out a full folder path and a comma separated list of software policies by name found in that folder.<span class="anchor" id="line-1356"></span><span class="anchor" id="line-1357"></span></p><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">findSoftwarePolicies.py<span class="anchor" id="line-1358"></span><span class="anchor" id="line-1359"></span><span class="anchor" id="line-1360"></span><span class="anchor" id="line-1361"></span><span class="anchor" id="line-1362"></span><span class="anchor" id="line-1363"></span><span class="anchor" id="line-1364"></span><span class="anchor" id="line-1365"></span><span class="anchor" id="line-1366"></span><span class="anchor" id="line-1367"></span><span class="anchor" id="line-1368"></span><span class="anchor" id="line-1369"></span><span class="anchor" id="line-1370"></span><span class="anchor" id="line-1371"></span><span class="anchor" id="line-1-173"></span></p><div class="highlight python" style="color: rgb(0, 0, 0); font-family: sans-serif;"><div class="codearea" dir="ltr" lang="en" style="margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247);"><pre dir="ltr" id="CA-d566706c19984145ba1901be21e939861b48021a" lang="en" style="border-width: initial; border-style: none; background-color: rgb(243, 245, 247); padding: 10pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="line"><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">folder</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">walk</span></span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_2"></span><span class="anchor" id="line-2-91"></span><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">pytwist</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">twistserver</span></span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_3"></span><span class="anchor" id="line-3-76"></span><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">pytwist.com.opsware.swmgmt</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">SoftwarePolicyRef</span></span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_4"></span><span class="anchor" id="line-4-62"></span></span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_5"></span><span class="anchor" id="line-5-58"></span><span class="ID">ts</span> = <span class="ID">twistserver</span>.<span class="ID">TwistServer</span>()</span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_6"></span><span class="anchor" id="line-6-50"></span><span class="ID">path</span> = <span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">Opsware/Tools</span><span class="String" style="color: rgb(0, 64, 128);">'</span></span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_7"></span><span class="anchor" id="line-7-41"></span><span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">dirname</span>, <span class="ID">_</span>, <span class="ID">objectList</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">walk</span>(<span class="ID">ts</span>, <span class="ID">path</span>.<span class="ID">split</span>(<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">/</span><span class="String" style="color: rgb(0, 64, 128);">'</span>)):</span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_8"></span><span class="anchor" id="line-8-38"></span>    <span class="ID">found</span>=[<span class="ID">obj</span>.<span class="ID">name</span></span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_9"></span><span class="anchor" id="line-9-33"></span>           <span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">obj</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">objectList</span></span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_10"></span><span class="anchor" id="line-10-30"></span>           <span class="ResWord" style="color: rgb(160, 0, 0);">if</span> <span class="ResWord" style="color: rgb(160, 0, 0);">isinstance</span>(<span class="ID">obj</span>,<span class="ID">SoftwarePolicyRef</span>)]</span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_11"></span><span class="anchor" id="line-11-27"></span>    <span class="ResWord" style="color: rgb(160, 0, 0);">if</span> <span class="ID">found</span>:</span>
<span class="line"><span class="LineAnchor" id="CA-d566706c19984145ba1901be21e939861b48021a_12"></span><span class="anchor" id="line-12-26"></span>        <span class="ResWord" style="color: rgb(160, 0, 0);">print</span> <span class="ID">dirname</span>, <span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">:</span><span class="String" style="color: rgb(0, 64, 128);">'</span>, <span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">,</span><span class="String" style="color: rgb(0, 64, 128);">'</span>.<span class="ID">join</span>(<span class="ID">found</span>)</span>
</pre></div></div><span class="anchor" id="line-1372" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">Execution output<span class="anchor" id="line-1373"></span><span class="anchor" id="line-1374"></span><span class="anchor" id="line-1375"></span><span class="anchor" id="line-1376"></span><span class="anchor" id="line-1377"></span><span class="anchor" id="line-1378"></span><span class="anchor" id="line-1379"></span><span class="anchor" id="line-1380"></span><span class="anchor" id="line-1381"></span><span class="anchor" id="line-1382"></span><span class="anchor" id="line-1383"></span><span class="anchor" id="line-1384"></span><span class="anchor" id="line-1385"></span><span class="anchor" id="line-1386"></span><span class="anchor" id="line-1387"></span><span class="anchor" id="line-1388"></span><span class="anchor" id="line-1389"></span><span class="anchor" id="line-1390"></span><span class="anchor" id="line-1391"></span><span class="anchor" id="line-1392"></span><span class="anchor" id="line-1393"></span><span class="anchor" id="line-1394"></span><span class="anchor" id="line-1395"></span><span class="anchor" id="line-1396"></span><span class="anchor" id="line-1397"></span><span class="anchor" id="line-1398"></span><span class="anchor" id="line-1399"></span><span class="anchor" id="line-1400"></span><span class="anchor" id="line-1401"></span></p><pre style="color: rgb(0, 0, 0); border-width: 1pt; border-style: solid; border-color: rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="anchor" id="line-1-22"></span>[root@dc1 FolderService]# ./findSoftwarePolicies.py
<span class="anchor" id="line-2-20"></span>Opsware/Tools/Extensible Discovery/Customer Provided Components : Customer Provided Scripts
<span class="anchor" id="line-3-14"></span>Opsware/Tools/Extensible Discovery/HP Provided Components : HP Provided Scripts
<span class="anchor" id="line-4-11"></span>Opsware/Tools/Ocli : Ocli
<span class="anchor" id="line-5-9"></span>Opsware/Tools/Solaris Patching : Solaris IPS Package Acquisition Tools
<span class="anchor" id="line-6-8"></span>Opsware/Tools/Server Modules/com.opsware.sitemap.extension.iis : Internet Information Server
<span class="anchor" id="line-7-6"></span>Opsware/Tools/Server Modules/com.opsware.server.module.users_groups_windows : Windows Users And Groups
<span class="anchor" id="line-8-6"></span>Opsware/Tools/Server Modules/com.opsware.server.module.patches_packages : Registered Software
<span class="anchor" id="line-9-4"></span>Opsware/Tools/Server Modules/com.opsware.server.module.users_groups_unix : UNIX Users And Groups
<span class="anchor" id="line-10-2"></span>Opsware/Tools/Server Modules/com.opsware.server.module.extensible_discovery : Extensible Discovery
<span class="anchor" id="line-11-2"></span>Opsware/Tools/Server Modules/com.opsware.server.module.iis7_windows : Windows IIS Settings
<span class="anchor" id="line-12-2"></span>Opsware/Tools/Server Modules/com.opsware.server.module.dot_net_assemblies : Windows .NET Framework Configurations
<span class="anchor" id="line-13-1"></span>Opsware/Tools/Server Modules/com.opsware.server.module.local_security : Windows Local Security Settings
<span class="anchor" id="line-14-1"></span>Opsware/Tools/Server Modules/com.opsware.server.module.device_manager : Windows Device Manager
<span class="anchor" id="line-15-1"></span>Opsware/Tools/Server Modules/com.opsware.server.module.storage.compliance : Storage Compliance Checks
<span class="anchor" id="line-16-1"></span>Opsware/Tools/Server Modules/com.opsware.server.module.storage.dbscanner.oracle : Database scanner for Oracle
<span class="anchor" id="line-17-1"></span>Opsware/Tools/Server Modules/com.opsware.testing.sleep : Sleep 60s SMO
<span class="anchor" id="line-18-1"></span>Opsware/Tools/Server Modules/com.opsware.sitemap : Runtime State
<span class="anchor" id="line-19-1"></span>Opsware/Tools/Server Modules/com.opsware.sitemap.extension.weblogic : Weblogic
<span class="anchor" id="line-20-1"></span>Opsware/Tools/Server Module Utility : Server Module Utility
<span class="anchor" id="line-21-1"></span>Opsware/Tools/ISMtool : ISMtool
<span class="anchor" id="line-22-1"></span>Opsware/Tools/Python : Python for SA Modules
<span class="anchor" id="line-23-1"></span>Opsware/Tools/Chef-12.8.1 : chef-solo-12.8.1
<span class="anchor" id="line-24-1"></span>Opsware/Tools/Python 2 Opsware API Access for Server Modules : Python 2 Opsware API Access for Server Modules
<span class="anchor" id="line-25-1"></span>Opsware/Tools/Python Opsware API Access : Python Opsware API Access
<span class="anchor" id="line-26-1"></span>Opsware/Tools/Windows PowerShell Connector : Windows PowerShell Connector
<span class="anchor" id="line-27-1"></span>Opsware/Tools/Database &amp; Middleware Automation : DMA Agent Support</pre><span class="anchor" id="line-1402" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><span class="anchor" id="line-1403" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line862" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">There is a faster way to perform this same operation by using the class matching&nbsp;<tt class="backtick"></tt><tt class="backtick">list()</tt><tt class="backtick"></tt>&nbsp;method.<span class="anchor" id="line-1404"></span><span class="anchor" id="line-1405"></span><span class="anchor" id="line-1406"></span><span class="anchor" id="line-1407"></span><span class="anchor" id="line-1408"></span><span class="anchor" id="line-1409"></span><span class="anchor" id="line-1410"></span><span class="anchor" id="line-1411"></span><span class="anchor" id="line-1412"></span><span class="anchor" id="line-1413"></span><span class="anchor" id="line-1414"></span><span class="anchor" id="line-1-175"></span></p><div class="highlight python" style="color: rgb(0, 0, 0); font-family: sans-serif;"><div class="codearea" dir="ltr" lang="en" style="margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247);"><pre dir="ltr" id="CA-74931b10d90c948259b799d99dfefd39e2515163" lang="en" style="border-width: initial; border-style: none; background-color: rgb(243, 245, 247); padding: 10pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="line"><span class="Comment" style="color: rgb(0, 128, 0);">#!/opt/opsware/bin/python</span></span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_2"></span><span class="anchor" id="line-2-92"></span><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">pytwist</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">twistserver</span></span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_3"></span><span class="anchor" id="line-3-77"></span><span class="ID">ts</span> = <span class="ID">twistserver</span>.<span class="ID">TwistServer</span>()</span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_4"></span><span class="anchor" id="line-4-63"></span><span class="ID">FS</span> = <span class="ID">ts</span>.<span class="ID">folder</span>.<span class="ID">FolderService</span></span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_5"></span><span class="anchor" id="line-5-59"></span></span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_6"></span><span class="anchor" id="line-6-51"></span><span class="ID">pathRef</span> = <span class="ID">FS</span>.<span class="ID">getFNode</span>([<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">Opsware</span><span class="String" style="color: rgb(0, 64, 128);">'</span>,<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">Tools</span><span class="String" style="color: rgb(0, 64, 128);">'</span>])</span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_7"></span><span class="anchor" id="line-7-42"></span><span class="ID">fNodeRefs</span> = <span class="ID">FS</span>.<span class="ID">list</span>(<span class="ID">pathRef</span>,<span class="ResWord" style="color: rgb(160, 0, 0);">True</span>,<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">com.opsware.swmgmt.SoftwarePolicyRef</span><span class="String" style="color: rgb(0, 64, 128);">'</span>)</span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_8"></span><span class="anchor" id="line-8-39"></span><span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">fnode</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">fNodeRefs</span>:</span>
<span class="line"><span class="LineAnchor" id="CA-74931b10d90c948259b799d99dfefd39e2515163_9"></span><span class="anchor" id="line-9-34"></span>    <span class="ResWord" style="color: rgb(160, 0, 0);">print</span> <span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">/</span><span class="String" style="color: rgb(0, 64, 128);">'</span>.<span class="ID">join</span>(<span class="ID">f</span>.<span class="ID">name</span> <span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">f</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">fnode</span> <span class="ResWord" style="color: rgb(160, 0, 0);">if</span> <span class="ID">f</span>.<span class="ID">id</span> != <span class="Number" style="color: rgb(0, 128, 192);">0</span>)</span>
</pre></div></div><span class="anchor" id="line-1415" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line862" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">This takes 1sec and using the walk took 17sec - why is this? The&nbsp;<tt class="backtick"></tt><tt class="backtick">list</tt><tt class="backtick"></tt>&nbsp;method recursively iterates the folder structure and pattern matches inside the Twist removing all the PyTwist calling overhead.<span class="anchor" id="line-1416"></span><span class="anchor" id="line-1417"></span></p><p class="line862" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">The&nbsp;<tt class="backtick"></tt><tt class="backtick">list</tt><tt class="backtick"></tt>&nbsp;call returns an array of tuples each tuple will look like the below. The join generator skips folderRef 0, the root node, when reassembling the path to the software policy.<span class="anchor" id="line-1418"></span><span class="anchor" id="line-1419"></span><span class="anchor" id="line-1420"></span><span class="anchor" id="line-1421"></span></p><pre style="color: rgb(0, 0, 0); border-width: 1pt; border-style: solid; border-color: rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="anchor" id="line-1-23"></span>(&lt;/ (FolderRef:0) instance at 0x7f7189259098&gt;, &lt;Opsware (FolderRef:10001) instance at 0x7f71892590e0&gt;, &lt;Tools (FolderRef:80001) instance at 0x7f7189259128&gt;, &lt;Server Modules (FolderRef:280001) instance at 0x7f7189259170&gt;, &lt;com.opsware.server.module.device_manager (FolderRef:2000001) instance at 0x7f7189259a70&gt;, &lt;Windows Device Manager (SoftwarePolicyRef:410001) instance at 0x7f7189259ab8&gt;
<span class="anchor" id="line-2-21"></span>)</pre><span class="anchor" id="line-1422" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">A simple change to print out the folder structure instead.<span class="anchor" id="line-1423"></span><span class="anchor" id="line-1424"></span><span class="anchor" id="line-1425"></span><span class="anchor" id="line-1-177"></span></p><div class="highlight python" style="color: rgb(0, 0, 0); font-family: sans-serif;"><div class="codearea" dir="ltr" lang="en" style="margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247);"><pre dir="ltr" id="CA-fb69d80d75f3c865b29457f0f0706803907c9ddb" lang="en" style="border-width: initial; border-style: none; background-color: rgb(243, 245, 247); padding: 10pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="line"><span class="ID">fNodeRefs</span> = <span class="ID">FS</span>.<span class="ID">list</span>(<span class="ID">pathRef</span>,<span class="ResWord" style="color: rgb(160, 0, 0);">True</span>,<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">com.opsware.folder.FolderRef</span><span class="String" style="color: rgb(0, 64, 128);">'</span>)</span>
</pre></div></div><span class="anchor" id="line-1426" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line867" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;"><tt class="backtick"></tt><tt class="backtick">list</tt><tt class="backtick"></tt>&nbsp;without supplying any class matching string is equivalent to the&nbsp;<tt class="backtick"></tt><tt class="backtick">walk</tt><tt class="backtick"></tt>&nbsp;function with the downside that the entire result set must be computed and returned from the call as its not a generator function. This call should not be abused for large sub-tree traversals.<span class="anchor" id="line-1427"></span><span class="anchor" id="line-1428"></span></p><p class="line867" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;"></p><h2 id="Creating.2FRemoving_folder_structures" style="color: rgb(0, 0, 0); letter-spacing: normal; text-transform: none; font-family: sans-serif;">Creating/Removing folder structures</h2><span class="anchor" id="line-1429" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><span class="anchor" id="line-1430" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">In this example we will replicate the following filesystem hierarchy into the SA folder structure<span class="anchor" id="line-1431"></span><span class="anchor" id="line-1432"></span><span class="anchor" id="line-1433"></span><span class="anchor" id="line-1434"></span><span class="anchor" id="line-1435"></span><span class="anchor" id="line-1436"></span><span class="anchor" id="line-1437"></span><span class="anchor" id="line-1438"></span></p><pre style="color: rgb(0, 0, 0); border-width: 1pt; border-style: solid; border-color: rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="anchor" id="line-1-24"></span>root
<span class="anchor" id="line-2-22"></span>├── a
<span class="anchor" id="line-3-15"></span>│   ├── b
<span class="anchor" id="line-4-12"></span>│   │   └── c
<span class="anchor" id="line-5-10"></span>│   └── d
<span class="anchor" id="line-6-9"></span>└── e</pre><span class="anchor" id="line-1439" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">First create the structure above<span class="anchor" id="line-1440"></span><span class="anchor" id="line-1441"></span><span class="anchor" id="line-1442"></span><span class="anchor" id="line-1443"></span><span class="anchor" id="line-1444"></span></p><pre style="color: rgb(0, 0, 0); border-width: 1pt; border-style: solid; border-color: rgb(174, 189, 204); background-color: rgb(243, 245, 247); padding: 5pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="anchor" id="line-1-25"></span>mkdir -p root/a/b/c
<span class="anchor" id="line-2-23"></span>mkdir root/a/d
<span class="anchor" id="line-3-16"></span>mkdir root/e</pre><span class="anchor" id="line-1445" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line874" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">Map the structure into SA<span class="anchor" id="line-1446"></span><span class="anchor" id="line-1447"></span><span class="anchor" id="line-1448"></span><span class="anchor" id="line-1449"></span><span class="anchor" id="line-1450"></span><span class="anchor" id="line-1451"></span><span class="anchor" id="line-1452"></span><span class="anchor" id="line-1453"></span><span class="anchor" id="line-1454"></span><span class="anchor" id="line-1455"></span><span class="anchor" id="line-1456"></span><span class="anchor" id="line-1-179"></span></p><div class="highlight python" style="color: rgb(0, 0, 0); font-family: sans-serif;"><div class="codearea" dir="ltr" lang="en" style="margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247);"><pre dir="ltr" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0" lang="en" style="border-width: initial; border-style: none; background-color: rgb(243, 245, 247); padding: 10pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="line"><span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">os</span></span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_2"></span><span class="anchor" id="line-2-93"></span><span class="ResWord" style="color: rgb(160, 0, 0);">from</span> <span class="ID">pytwist</span> <span class="ResWord" style="color: rgb(160, 0, 0);">import</span> <span class="ID">twistserver</span></span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_3"></span><span class="anchor" id="line-3-78"></span></span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_4"></span><span class="anchor" id="line-4-64"></span><span class="ID">ts</span> = <span class="ID">twistserver</span>.<span class="ID">TwistServer</span>()</span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_5"></span><span class="anchor" id="line-5-60"></span><span class="ID">FolderService</span> = <span class="ID">ts</span>.<span class="ID">folder</span>.<span class="ID">FolderService</span></span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_6"></span><span class="anchor" id="line-6-52"></span></span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_7"></span><span class="anchor" id="line-7-43"></span><span class="ID">saRoot</span> = <span class="ID">FolderService</span>.<span class="ID">getRoot</span>()</span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_8"></span><span class="anchor" id="line-8-40"></span><span class="ResWord" style="color: rgb(160, 0, 0);">for</span> <span class="ID">dirpath</span>, <span class="ID">_</span>, <span class="ID">_</span> <span class="ResWord" style="color: rgb(160, 0, 0);">in</span> <span class="ID">os</span>.<span class="ID">walk</span>(<span class="String" style="color: rgb(0, 64, 128);">"</span><span class="String" style="color: rgb(0, 64, 128);">root</span><span class="String" style="color: rgb(0, 64, 128);">"</span>, <span class="ID">topdown</span>=<span class="ResWord" style="color: rgb(160, 0, 0);">True</span>):</span>
<span class="line"><span class="LineAnchor" id="CA-e636475c505ef87cc8006c3259f110f8c07566d0_9"></span><span class="anchor" id="line-9-35"></span>    <span class="ID">FolderService</span>.<span class="ID">createPath</span>(<span class="ID">saRoot</span>, <span class="ID">dirpath</span>.<span class="ID">split</span>(<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">/</span><span class="String" style="color: rgb(0, 64, 128);">'</span>))</span>
</pre></div></div><span class="anchor" id="line-1457" style="color: rgb(0, 0, 0); font-family: sans-serif;"></span><p class="line862" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">On execution the OS file system structure we created will be replicated in the SA library. What's more the code can be ran again as the&nbsp;<tt class="backtick"></tt><tt class="backtick">createPath()</tt><tt class="backtick"></tt>&nbsp;call is indifferent to the fact that directories may already be present and it will only create what is missing.<span class="anchor" id="line-1458"></span><span class="anchor" id="line-1459"></span></p><img src="./mediawiki/images/PN/root-folders.png"><br><p class="line862" style="color: rgb(0, 0, 0); letter-spacing: normal; font-family: sans-serif; font-size: 16px;">The removal of that structure is accomplish by a call to&nbsp;<tt class="backtick"></tt><tt class="backtick">bulkRemove</tt><tt class="backtick"></tt>&nbsp;that will recursively delete all children below our root folder. Be careful with this call a misstep will delete the folder and its contents if you have permissions to do so.<span class="anchor" id="line-1462"></span><span class="anchor" id="line-1463"></span><span class="anchor" id="line-1464"></span><span class="anchor" id="line-1465"></span><span class="anchor" id="line-1-181"></span></p><div class="highlight python" style="color: rgb(0, 0, 0); font-family: sans-serif;"><div class="codearea" dir="ltr" lang="en" style="margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245, 247);"><pre dir="ltr" id="CA-e3beddc7714f58a96558d2f131c7cfbda9ff04de" lang="en" style="border-width: initial; border-style: none; background-color: rgb(243, 245, 247); padding: 10pt; font-family: courier, monospace; white-space: pre-wrap; overflow-wrap: break-word;"><span class="line"><span class="ID">fnode</span> = <span class="ID">ts</span>.<span class="ID">folder</span>.<span class="ID">FolderService</span>.<span class="ID">getFNode</span>([<span class="String" style="color: rgb(0, 64, 128);">'</span><span class="String" style="color: rgb(0, 64, 128);">root</span><span class="String" style="color: rgb(0, 64, 128);">'</span>])</span>
<span class="line"><span class="LineAnchor" id="CA-e3beddc7714f58a96558d2f131c7cfbda9ff04de_2"></span><span class="anchor" id="line-2-94"></span><span class="ID">ts</span>.<span class="ID">folder</span>.<span class="ID">FolderService</span>.<span class="ID">bulkRemove</span>([<span class="ID">fnode</span>])</span></pre></div></div>