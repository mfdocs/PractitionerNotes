Micro Focus Hybrid Cloud Management (HCM) allows end users to deploy service instances such as virtual machines, applications, etc. After a service instance has been deployed, HCM displays all defined user actions to end users. Certain enterprises would like to display a subset of user actions to end users depending on state of service instance. Some of the example use cases that enterprises achieve are:<div><br><div><ul><li>When a virtual machine is in powered on status, “Start Server” user action is hidden from end users.</li><li>When a virtual machine is in powered off status, “Stop Server” user action is hidden from end users.<br></li><li>When a web site is up and running, “Start Web Service” user action is hidden from end users.<br></li></ul><div><br></div><div>Follow the steps below to change visibility of certain user actions for a deployed service from end users. In the steps discussed below, when a server is provisioned and powered on during the deployment, the “Start Server” action is hidden from end users.&nbsp; Similar steps can be used to either hide or expose user actions of your choice depending on service instance state.<br></div></div><div><ol><li>Get a list of&nbsp;Operations Orchestration (OO) flows that needs to be modified to change visibility of user actions<ul><li>Login to the HCM Service Management Console.</li><li>In HCM, user actions are configured on resource offerings or service components. User actions can be invoked by subscribers in the HCM Marketplace Portal (MPP) after a subscription has been provisioned. For example, a “Restart Server” user action can be configured on a server service component or on an associated resource offering.<br></li><li>The following are the two categories of OO flows that may need to be modified to change visibility of user actions:&nbsp;<br><ol><li><b>Service lifecycle OO flows</b>: The service lifecycle OO flows are defined in the “LIFECYCLE” tab of the service component and its associated resource offering’s “LIFECYCLE” tab.</li><li><b>User action OO flows</b>: The user action OO flows are defined in the “USER OPERATIONS” tab of the service component and its associated resource offering’s “USER OPERATIONS” tab. These are the user operations (actions) that an end user sees in HCM Marketplace Portal.</li></ol></li><li>Open the service design for the service that requires change in visibility of certain user actions.<br></li><li>Select and view the component that corresponds to service for which visibility of certain user actions have to be changed.<br></li><li>Click “LIFECYCLE” tab. Note down a list of OO flows that needs to be modified. In the sample screenshot below, there are no service lifecycle OO flows that are defined in the service component object.<br><img src="./mediawiki/images/PN/HCM-Visibility-CompLifecycle.png"><br></li><li>Click “USER OPERATIONS” tab. Note down a list of OO flows that needs to be modified. In the sample screenshot below, there are no OO flows that are defined as user operations in the service component object.<br><img src="./mediawiki/images/PN/HCM-Visibility-CompUserOperations.png"><br></li><li>Click “RESOURCE OFFERINGS” tab. Select the “SUN” icon and click “Navigate to Resource Offering”.<br><img src="./mediawiki/images/PN/HCM-Visibility-CompNavRscOff.png"><br></li><li>Click “LIFECYCLE” tab. In the sample screenshot below, “vCenter Deploy VM” OO flow is defined as a service lifecycle OO flow that provisions a VM. Note down a list of OO flows that needs to be modified. The “vCenter Deploy VM” OO flow may need to be modified so that “Start Server” user operation is hidden from end users after deployment of VM.<br><img src="./mediawiki/images/PN/HCM-Visibility-RscOffLifeCycle.png"><br></li><li>Click “USER OPERATIONS” tab. In the sample screenshot below, a list of user operation OO flows that are defined in “Resource Offering” object. These user operation OO flows appear as actions in end user marketplace portal. Note down a list of OO flows that needs to be modified. An example use case may be that after a “Start Server” user operation has been run successfully, “Start Server” user operation should be hidden from end users.<br><img src="./mediawiki/images/PN/HCM-Visibility-RscOffUserActions.png"><br></li></ul></li><li>Modify OO flows to change visibility of user actions depending on service instance state.<ul><li>Launch OO Studio</li><li>Add a new flow input field with the name “actionContainerObjID” to all the identified OO flows in earlier steps. In the sample screenshot below, “actionContainerObjID” flow input has been added to the “vCenter Deploy VM” flow.<br><img src="./mediawiki/images/PN/HCM-Visibility-OOFlowActionContObjInput.png"><br></li><li>This article includes the “UpdateHCMUserActionVisibility” OO flow in XML format. The “UpdateHCMUserActionVisibility” OO flow changes visibility of user actions in HCM Marketplace Portal. The flow gets a list of action names that needs to be hidden, a list of action names that needs to be exposed and the action container object that contains these actions. The flow then updates the action container object with changes to visibility of supplied actions. The action container object can be either a resource subscription or a service component object. When a service instance is deployed in HCM, the following action container objects are created:<br><ul><li>A resource subscription object is created for every resource offering defined on its associated service design.</li><li>A service component object is created for every component on its associated service design.</li></ul></li><li>The “UpdateHCMUserActionVisibility” OO flow can be further enhanced to meet your coding style, implement organization specific requirements, perform additional checks required for your environment, to improve performance, to use as a reference, etc. Use this OO flow as is and it is not supported by Micro Focus.</li><li><br></li></ul></li><li>In OO Studio, create a new content pack using updated OO flows. Upload new content pack to OO Central.<br></li><li>Map HCM action container object ID to the “actionContainerObjID” flow input field of OO flows.<br></li><li>Deploy new service in HCM Marketplace Portal. Test and fix any flow input and/or mapping issues.<br></li><li>The following screenshot shows all available user actions on a deployed service that was deployed without incorporating business logic to change visibility of user actions:<br></li><li>The following screenshot shows all available user actions on a deployed service after making changes to the “vCenter Deploy VM” flow to hide “Start Server” user action.<br></li></ol></div></div>