<div>The following are some frequently asked questions about installing and using Service Management Automation (SMA).</div><div><br></div><div>Installation</div><div>How do I know the image tag for pods?</div><div>Answer:</div><div>Run the following command:&nbsp;</div><div>kubectl describe pods &lt;pod names&gt; -n &lt;namespace&gt;</div><div><br></div><div>What should I do if one of my pods fails?</div><div>Answer:</div><div>&nbsp;Run the following command:</div><div><br></div><div>kubectl delete pod &lt;name of the pod that failed&gt; -n &lt;namespace&gt;</div><div><br></div><div>Is there a way to remove and restart the suite image installation?</div><div>Question details:</div><div><br></div><div>My Service Management Automation suite installation failed somewhere. I had issues with the image push and one image was not pushed.&nbsp;</div><div><br></div><div>Answer:</div><div><br></div><div>Re-import the images by running the image import script again. You can run the image import script multiple times. For more information, see Download the container images.</div><div><br></div><div>Where are the docker proxy settings stored in the CDF environment?</div><div>Answer:</div><div><br></div><div>These settings are in both the /usr/lib/systemd/system/docker.service.d and /usr/lib/systemd/system/docker-bootstrap.service.d in the http_proxy.conf files.</div><div><br></div><div>[Service]</div><div><br></div><div>Environment= "http_proxy=http://&lt;proxy&gt;:&lt;port&gt;" "https_proxy=http://&lt;proxy&gt;:&lt;port&gt;" "no_proxy=localhost,127.0.0.1"</div><div><br></div><div>If the proxy is configured incorrectly, you may not be able to run downloadimages.sh successfully. After updating these proxy settings, run kube-restart.sh from /opt/kubernetes/bin, and then downloadimages.sh should work.</div><div><br></div><div>How do I know the namespace being used for Service Management Automation?</div><div>Answer:</div><div><br></div><div>ITOM Plaform supports only one instance of the suite. It automatically assigns a namespace (itsma-xxxxx) for your suite installation. To see the namespace being used for your current suite installation, log in to CDF, and then navigate to SUITE &gt; Management.</div><div><br></div><div>What should I do if an suite update fails?</div><div>Question details:</div><div><br></div><div>When upgrading the suite images from the CDF user interface (SUITE &gt; Management &gt; More Actions icon () &gt; Update), after I click NEXT on the storage configuration page, a message "The https://&lt;ingresshost&gt;/update might be temporarily down or it may have moved permanently to a new web address." is displayed.</div><div><br></div><div>Answer:</div><div><br></div><div>Follow the steps below to reload this page and finish the suite update.</div><div><br></div><div>Log in to the https://&lt;ingresshost&gt;/update page on a new tab in the same browser.</div><div>Reload the frame in the suite upgrade page where an error message is displayed.</div><div>Click APPLY on the page that opens to finish the suite update.</div><div>What should I do if I cannot uninstall the suite from the CDF user interface?</div><div>Question details:</div><div><br></div><div>I want to uninstall Service Management Automation because the installation failed. However, the Uninstall menu option (SUITE &gt; Management &gt; More Action icon &gt; Uninstall) does not work. What should I do?</div><div><br></div><div>Answer:</div><div><br></div><div>Recreate the suite-db pods with the following commands:</div><div><br></div><div>kubectl get pods -n core</div><div><br></div><div>kubectl delete pod &lt;pod name of suite-db&gt; -n core</div><div>Alternatively, you can restart the virtual machine where the suite-db is installed.</div><div><br></div><div>Load balancing</div><div>What if the customer plans to use a Citrix based load balancer outside of Service Management Automation? Will there be any impact on the suite load balancer?</div><div>Answer:</div><div><br></div><div>As the Service Management Automation suite has its own load balancer already, it does not need an external load balancer.</div><div><br></div><div>Do we really need an external load balancer if the suite is providing a load balancer itself?</div><div>Answer:</div><div><br></div><div>As the suite has its own load balancer already, it does not need an external load balancer.</div><div><br></div><div>If an external load balancer is also used, will the external load balancer connect with the suite load balancer?</div><div>Answer:</div><div><br></div><div>As suite has its own load balancer already, it does not need an external Load Balancer. In the event that you have already an external load balancer, it connects to the suite load balancer.</div><div><br></div><div>Database support</div><div>How do I access the internal Postgres database for the suite CMDB?</div><div>Question details:</div><div><br></div><div>If CMDB uses the internal Postgres database, can I open the Postgres UI and browse through the contents of the database?</div><div><br></div><div>Answer:&nbsp;</div><div><br></div><div>The CMDB's Postgres database in the suite has an exposed node port. You can use an external Postgres client to access the database server and browse through the contents of the database.&nbsp;</div><div><br></div><div>CMDB Postgres port<span style="white-space:pre">	</span>31402</div><div>CMDB Browser ports<span style="white-space:pre">	</span>31403, 31404</div><div>CMDB Server ports<span style="white-space:pre">	</span>31400, 31401</div><div>What are the requirements for using Oracle databases for the containerized CMDB?</div><div>Answer:</div><div><br></div><div>The configuration is the same as the classic configuration.</div><div><br></div><div>Is one PostgreSQL database enough for production?</div><div>It is recommended to use HA enabled external PostgreSQL database for production. There are several PG HA solutions in the community and commercial support is also available in the market.</div><div><br></div><div>What is stored into database and file system?</div><div>The database stores all transactional and foundational data, for example, tickets, changes, CIs, People, Locations and general Codeless Configuration data. The file system stores attachments and search index data.</div><div><br></div><div>Is it recommended to have a cluster about database and file system?</div><div>Yes, a clustered/redundant DB server and NFS server are also recommended for production use.</div><div><br></div><div>Can I have any desynchronization between file system and database?</div><div>Question details:</div><div>Can I have any desynchronization between file system and database? It could be a problem if the application is up and the database is down. What happens to the file system?</div><div><br></div><div>Answer:</div><div>Transactional and application data is stored in the database. The file system stores logs, IDOL index files, and some deployment configuration and property files. In the case of the database being down, the full system will be out of service too. All application transactions rely on DB operations, and this includes user login and authentication. So, although the file system may work fine, desynchronization is not an issue as the application would not be interacting with it until the database service is back. Also, compared to DB access, files on the file system are changed far less frequently.</div><div><br></div><div>Master data onboarding</div><div>How do I push CIs from a standalone UCMDB to the suite CMDB?</div><div>Question details:</div><div><br></div><div>I have the suite installed and have the standalone UCMDB. I want to push the CIs from the standalone UCMDB to the suite CMDB. What are the URL and host details that I should give the standalone UCMDB?</div><div><br></div><div>Answer:</div><div><br></div><div>The current release supports pushing CIs from a standalone UCMDB to the suite CMDB. Refer to How to Work with Data Push Jobs for the URL and host details.</div><div><br></div><div>Identity Manager (IDM)</div><div>What is the role of IDM in the suite?</div><div>Answer:</div><div>IDM is used for user authentication. IDM connects to the customer's LDAP server.</div><div><br></div><div>DNS</div><div>What is the role of DNS in the suite?</div><div>Answer:</div><div>Kubernetes DNS in the suite is only used for internal services.</div><div><br></div><div>Can we configure or use external DNS?</div><div>Answer:</div><div>No.</div><div><br></div><div>Integrations</div><div>What happens if the suite load balancer fails or crashes?&nbsp;</div><div>Answer:</div><div><br></div><div>The suite provides a self-recovery mechanism for the load balancer.</div><div><br></div><div>Can we configure external mail servers for notifications in the suite?</div><div>Answer:</div><div><br></div><div>Yes, the suite can work with an external mail server, which can be configured from the Suite Administration interface.</div><div><br></div><div>Reverse proxy</div><div>What is the role of Reverse Proxy?</div><div>Answer:</div><div><br></div><div>It is Nginx based, the single gateway for incoming traffic. It works for routing, and authentication gateway.</div><div><br></div><div>Miscellaneous</div><div>What should I do if a 502 error occurs when users attempt to log in to the suite?</div><div>Answer:</div><div><br></div><div>Perform the following steps on a master node to restart the frontend ingress:</div><div><br></div><div>Run the command below to get the pod name:</div><div>kubectl get pod&nbsp; -n &lt;suite namespace&gt; |grep nginx</div><div>Run the command below to delete the pod:</div><div>kubectl delete pod &lt;pod name&gt; -n &lt;suite namespace&gt;</div><div>Can I have part of the application in K8S and part (for example, database and file system) in legacy mode?</div><div>Answer:</div><div>Yes. Database and file system can be in legacy mode, meaning that they are external and not managed by K8S.&nbsp;</div><div><br></div><div>Which component uses RabbitMQ ?</div><div>Answer:</div><div>The Service Portal is using RabbitMQ.</div><div><br></div><div>Which part is critical for a reboot? If I reboot the database (not in K8S), is the application able to go on without rebooting itself?</div><div>Answer:</div><div>If multi-master is deployed, the sequence of rebooting master nodes is critical because K8S needs at least two master nodes functioning to keep the cluster running.</div><div>If database is rebooted, some of the pods will get restarted by K8S because the liveness check failed due to database error. Once the database is back again, the pods will come back as well.</div><div><br></div><div>Which solution do you advice to monitor ITSMA? Prometheus with Grafana and AlertManager?</div><div>Answer:</div><div>We recommend Prometheus with Grafana.</div><div><br></div><div>Is it easy to export docker images between two machines?</div><div>Answer:</div><div>Yes. It is quite easy to do this using the ‘docker save/load’ or ‘docker export/import’ command.</div><div><br></div><div>Can I verify the logs from outside of Linux server?</div><div>Answer:</div><div>Yes, the log files are the same. But the logs viewed in management portal are just stdout. There are more files on log volume.</div><div><br></div><div>What operations cannot be performed from the management portal UI, and I have to log in to the K8S server?</div><div>Answer:</div><div>The management portal manages the K8S resources only. So for the cases like below, you will need to log in to the servers:</div><div><br></div><div>You encounter issues around Docker or Kubernetes cluster status, for example, a node is not reachable, or Docker crashes.</div><div>You need advanced functions that are only available with command line:</div><div>Using CDF command lines, for example, kube-stop and kube-restart.</div><div>Going into the Docker container for trouble shooting, for example, kubectl exec –it.</div><div>See https://kubernetes.io/docs/reference/kubectl/overview/ for more details.</div><div>Using Docker commands, for example, docker inspect and docker pull.</div><div>You want to view more detailed logs.&nbsp;</div><div>The detailed logs are not visible in the management portal. However, it’s not required to log in to the K8S server specifically. Any Linux box that can access the NFS volume should work fine.</div><div>What are the recommended possibilities to monitor the suite?</div><div>Answer:</div><div>From the CDF portal, click LAUNCH DASHBOARD, under Namespace choose the suite namespace to make sure all deployments and pods are in desired status.</div><div><br></div><div>What are the items that we have to monitor to ensure that the suite works correctly? Can we use a product like Zabbix or BMC TrueSight for monitoring?</div><div>Answer:</div><div>Currently, we leverage Kubernetes/Docker level monitoring, and we have a whitepaper on Prometheus. For more details, see http://blog.kubernetes.io/2017/05/kubernetes-monitoring-guide.html.&nbsp;</div><div>There are several levels of monitoring:</div><div><br></div><div>Infra: NFS volume, VM hosts, and infra networking</div><div>Kubernetes nodes : CPU, Memory, Network IO, available disk spaces for all disk partitions</div><div>Docker containers: CPU, Memory, Network IO</div><div>Suite application: Customer can set up the monitoring the same way as the classic deployment by accessing the applications through URL.</div>