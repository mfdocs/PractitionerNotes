<p><span style="font-family: MetricHPE; font-size: 16px;">This
 section describes how to extend the COSO Data Lake to collect custom 
metrics to enable custom reporting using Business Value Dashboard or 
your own BI reporting tools.</span></p><p>This section covers the following topics:</p><ul><li>Custom metric collection concepts</li><li>Metric life cycle</li><li>Steps to create your custom content</li><li>Fully functional end to end example</li></ul><h2> <span class="mw-headline" id="Custom">Custom metric collection concepts</span></h2><p>There are two approaches to ingesting Operations Agent custom metrics into the COSO Data Lake:<br></p><h3>Collection Services</h3><p>The
 Collection Service is a containerized micro service designed to 
centrally collect large amounts of data from multiple sources, including the remote Operations 
Agents’ Performance Collection Component and store it in the COSO Data 
Lake. It supports collecting data from all Operations Agent supported 
platforms, and all supported versions. The Collection Service is 
horizontally scalable. It spawns one or more Agent Metric Collector 
containers, depending on the number of collections you configure for the agent data source, which 
in turn define the nodes from which to collect data.</p><p>This is the 
recommended data collection approach where the data is used for reporting purposes and 
doesn’t require real time analytics or central thresholding.</p><p>You 
use the Content Administration Service, a containerized micro service, 
to configure the Collection Service to collect data from the Operations 
Agents on a scheduled basis.&nbsp; The data collection mechanism uses the 
CODA client APIs to connect to the Operations Agent, which uses 
HTTPS-based communications by default, and falls back to HTTP,&nbsp; if HTTPS
 is unavailable.&nbsp; Note that the Collection Service requires a 
certificate from OBM, before the agent metric collection can start.&nbsp; The
 Content Administration Service also configures the COSO Data Lake to 
store and manage the data.</p><h3>OBM policies</h3><p>OBM policies are used to collect data from any of these sources:</p><ul><li>XML File</li><li>Structured Log File</li><li>REST web service</li><li>Performance Collection Component</li></ul><p>In
 this case the data is typically used for real time graphing and central
 thresholding purposes, but it can also be used for reporting since it 
is stored in the COSO Data Lake. You deploy OBM policies to the 
Operations Agents that configure what data to send to the COSO Data Lake
 via an HTTPS POST and how frequently.</p><p>Metric Streaming 
Configuration policies are supported on all Operations Agent platforms.&nbsp;
 All other metric collection policy types are supported on Windows and 
Linux platforms only.</p><p>You use the Content Administration Service to configure the COSO Data Lake to store and manage the data.</p><p>The following diagram shows the components used in collecting custom metrics.</p><div><br></div><div><img src="https://docs.microfocus.com/mediawiki/images/PN/diag1.png"><br></div><h2> <span class="mw-headline" id="Metric">Metric life cycle</span></h2><p class="MsoNormal">You
 need to consider what metrics to collect, whether aggregation is 
required and how long to retain the data in the COSO Data Lake.</p><p class="MsoNormal"><img src="https://docs.microfocus.com/mediawiki/images/PN/diag2.PNG"><br></p><h3>Define</h3><p class="MsoNormal">This involves defining how the COSO Data Lake is configured to process custom metrics:<br></p><ul><li>Database table(s) in Vertica</li><li>Kafka topic though which data is ingested <br></li><li>Connection
 between the Kafka topic and the database table (not applicable for the 
Agent Metric Collector of the Collection Service)</li></ul><p class="MsoNormal">This information is defined in a well-known JSON file format and configured using the Content Administration Service.<br></p><h3>Collect and ingest</h3><h4>Collection Service</h4><p class="MsoNormal">For
 the reporting use case, the recommended method of Operations Agent 
metric collection is to use the Collection Service.&nbsp; The metrics to 
collect, the agents from which to collect and how frequently to collect 
are defined in a well-known JSON file format and configured using the 
Content Administration Service.</p><h4>OBM policies</h4><p class="MsoNormal">If
 you use OBM policies to post the data to COSO, then you need to create,
 assign and deploy the policies.&nbsp; The policies can contain interfaces to integrate data from different sources, which metrics to 
collect from the local agent and how frequently to send the data to the 
COSO Data Lake. The Operations Agent, apart from acting as a source of 
system performance metrics, also acts as a metric integration framework,
 and provides the below mentioned options to integrate metrics to the COSO 
Data Lake.</p><p class="MsoNormal"><br></p><table class="MsoTableGrid" style="border-left: none;" cellspacing="0" cellpadding="0" border="1">
 <tbody><tr>
  <td style="width: 155.8pt; border-width: 1pt; border-left-style: solid; border-color: windowtext; border-image: initial; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Data source</b></p>
  </td>
  <td style="width: 155.85pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-left: none; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Policy type</b></p>
  </td>
  <td style="width: 155.85pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-left: none; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td style="width: 155.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">XML file</p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><span class="MsoHyperlink"><a href="https://docs.microfocus.com/itom/Operations_Bridge:2019.05/ConfigureXMLFilePolicies">Generic
  Output from XML File</a></span></p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Metric records stored in an XML file can be integrated to the COSO
  Data Lake.</p>
  </td>
 </tr>
 <tr>
  <td style="width: 155.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Structured log file</p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><span class="MsoHyperlink"><a href="https://docs.microfocus.com/itom/Operations_Bridge:2019.05/ConfigureStructuredLogfilePolicies">Generic
  Output from Structured Log File</a></span></p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Metric records stored in a structured format such as CSV format can
  be integrated to the COSO Data Lake.</p>
  </td>
 </tr>
 <tr>
  <td style="width: 155.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">REST web service:</p>
  <p class="MsoListParagraphCxSpFirst" style="margin-top:0in;margin-right:0in;
  margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;mso-add-space:auto;
  text-indent:-.25in;line-height:normal;mso-list:l0 level1 lfo1"><span style="font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
  Symbol">·<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span>XML input with transformation</p>
  <p class="MsoListParagraphCxSpLast" style="margin-top:0in;margin-right:0in;
  margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;mso-add-space:auto;
  text-indent:-.25in;line-height:normal;mso-list:l0 level1 lfo1"><span style="font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
  Symbol">·<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span>JSON input in pass-through mode, no
  transformation</p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><span class="MsoHyperlink"><a href="https://docs.microfocus.com/itom/Operations_Bridge:2019.05/ConfigureRESTWebServiceListenerPolicies">Generic
  Output from REST Web Service</a></span></p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Metric records stored in XML or JSON format can be integrated to the COSO
  Data Lake.&nbsp; It is recommended to use
  this policy with JSON format data for maximum throughput.</p><p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The JSON Format should be the one understood by COSO DI.<br></p>
  </td>
 </tr>
 <tr>
  <td style="width: 155.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Performance Collection Component</p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Generic Output from Agent Store <br></p><p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">[There is not Policy UI for this policy type, and this may get deprecated in future. Hence it is not recommended to use this policy type at the moment]<br></p>
  </td>
  <td style="width: 155.85pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="208" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Metric records stored in the Performance Collection Component can be
  integrated to the COSO Data Lake.&nbsp;
  Refer to the example policies in the Microsoft SQL Server Management
  Pack or the IBM WebSphere Management Pack for how the policy is configured
  using the raw policy editor.&nbsp; <br></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal">Note: A <span class="MsoHyperlink"><a href="https://docs.microfocus.com/itom/Operations_Bridge:2019.05/ConfigureDataForwardingPolicies">Data
Forwarding</a></span> policy is also required to match the data from the
collection policies and post it to the URL of the target COSO system.<br></p><p class="MsoNormal">You can also stream out-of-the-box system metrics to COSO
via <span class="MsoHyperlink"><a href="https://docs.microfocus.com/itom/Operations_Bridge:2019.05/ConfigureMetricStreamingConfigurationPolicies">Metric
Streaming Configuration</a></span> policies.</p><h3><span lang="EN-AU">Aggregate / Roll up /
Forecast</span></h3><p class="MsoNormal"><span lang="EN-AU">The raw
metrics in the COSO Data Lake can be aggregated to hourly, daily, percentile,
or one of the similar supported aggregations by the COSO Data Lake capability, forecast,
or rolled up using custom functions desired by the user.&nbsp;</span>Aggregation
rules, forecast and custom roll up functions are defined as rules in a JSON
file format and configured using the Content Administration Service.</p><h3><span lang="EN-AU">Aging</span></h3><p class="MsoNormal"><span lang="EN-AU">Metrics in the
COSO Data Lake are deleted based on the retention profiles associated with the
data sets. Each data set, which internally translates to a table in the
database, can have one associated retention profile.&nbsp;</span>Retention
profiles are defined in a JSON file format and configured using the Content
Administration Service.</p><h2> <span class="mw-headline"><span lang="EN-AU">Content configuration
overview</span></span></h2><p class="MsoNormal"><span lang="EN-AU">The reporting
content for the COSO Data Lake is packaged as a ZIP file with a well-known
folder structure where each folder contains a specific type of artifact.&nbsp; The supported artifacts are:</span></p><p class="MsoNormal"><span style="text-indent: -0.25in;" lang="EN-AU"></span></p><ul><li>Metric (schema) definition</li><li>Collection definition for the Operations Agent data source</li><li>Data enrichment definition</li><li>Custom roll up definition</li><li>Forecast definition</li><li>Bulk upload definition</li><li>Retention rules</li><li>BVD reports</li></ul><p class="MsoNormal"><span style="text-indent: -0.25in;" lang="EN-AU">Content configuration
is performed by the user logging in to the Content Administration Service
container and executing the </span><span style="text-indent: -0.25in; font-family: &quot;Courier New&quot;;">opsb-content-service.sh</span><span style="text-indent: -0.25in;"> </span><span style="text-indent: -0.25in;" lang="EN-AU">CLI.&nbsp;</span>The <span style="text-indent: -0.25in; font-family: &quot;Courier New&quot;;">opsb-content-service.sh</span> CLI provides the ability to configure a specific content package
or all the content packages available on the system.</p><p class="MsoNormal"><span lang="EN-AU">Out-of-the-box
content (e.g. System Infrastructure reporting, Event reporting) is shipped as
part of the Content Administration Service.&nbsp;
You can extend the out-of-the-box content or create brand new custom
content through an NFS folder based interface, using the same ZIP file format.</span></p><p class="MsoNormal"><span lang="EN-AU">When the
same content package (identified by a ZIP file name) is available both within
the Content Administration Service container and outside on the NFS folder
interface, the content ZIP file on the NFS folder is extracted on top of the extracted
content package from within the Content Administration Service, prior to
configuration. This mechanism can be used to extend out-of-the-box content or
configure a brand new content package.</span></p><p class="MsoNormal"><span lang="EN-AU">Each content
artifact is discussed in the following sections.</span></p><p class="MsoNormal">













































</p><h2> <span class="mw-headline"><span lang="EN-AU">Steps to create your
custom content</span></span></h2><div><span lang="EN-AU"><img src="https://docs.microfocus.com/mediawiki/images/PN/diag3.PNG"><br></span></div><div><h3><span lang="EN-AU">Step 1: Choose the metrics
to integrate</span></h3>

<p class="MsoNormal"><span lang="EN-AU">When using
the Collection Service approach, ensure that the Operation Agent contains the
custom metrics that you want to collect into the COSO Data Lake.&nbsp; You can store custom metrics in the
Operations Agent’s Performance Collection Component in either of these
recommended ways:</span></p><ul><li>Use a Perl 
script to log the metrics.&nbsp; See Using Perl Application Programming 
Interface for Submitting Custom Data for details.&nbsp; Also see the Easily 
collect custom metrics using Perl and visualize in OBM blog article for a
 working example.</li><li>Create a metrics policy.&nbsp; Data sources are database, Perl script, Structured Log File, XML File.</li><li>Use
 a measurement threshold policy to log metrics defined in the Source tab
 such as from an External Source, MIB, Program, Perfmon by clicking the 
“Store in Coda” checkbox for the required source.&nbsp; See Configure 
Measurement Threshold Policies for details.&nbsp;</li></ul>

<h3><span lang="EN-AU">Step 2: Define the COSO
Data Lake configuration</span></h3></div><div><img src="https://docs.microfocus.com/mediawiki/images/PN/diag4_4.PNG"><br></div><div><br></div><div>Configuring the COSO Data Lake involves configuring the
artifacts listed below.&nbsp; Each content artifact
should be placed in a well-known folder location, which is understood by the Content
Administration Service.<br></div><div>

<p class="MsoNormal">In a working directory of your choice, create the content
folder structure shown in the following table.&nbsp;
Replace &lt;content name&gt; with a unique alphanumeric name for your new
content.</p>

<span style="font-size:11.0pt;line-height:107%;font-family:&quot;Calibri&quot;,sans-serif;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:Calibri;mso-fareast-theme-font:
minor-latin;mso-hansi-theme-font:minor-latin;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:
EN-US;mso-bidi-language:AR-SA">The schema and bulk upload configuration are
mandatory.&nbsp; All other configuration is
optional</span><br></div><div><br></div><div><table class="MsoTableGrid" style="border-left: none;" cellspacing="0" cellpadding="0" border="1">
 <tbody><tr>
  <td style="width: 98.65pt; border-width: 1pt; border-left-style: solid; border-color: windowtext; border-image: initial; padding: 0in 5.4pt;" width="122" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Configuration</p>
  </td>
  <td style="width: 229.6pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-left: none; padding: 0in 5.4pt;" width="242" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Description</p>
  </td>
  <td style="width: 139.25pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-left: none; padding: 0in 5.4pt;" width="343" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Content folder</p>
  </td>
 </tr>
 <tr>
  <td style="width: 98.65pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="122" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Schema</p>
  </td>
  <td style="width: 229.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="242" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">This involves configuring the Vertica DB Schema, the associated Kafka
  Topic, and Kafka to Vertica ingestion.</p>
  </td>
  <td style="width: 139.25pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="343" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/metadata/&lt;content name&gt;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 98.65pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="122" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Bulk upload</p>
  </td>
  <td style="width: 229.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="242" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">If data is collected in CSV format and needs to be bulk uploaded to the
  Vertica database, which is the case when using the Collection Service, then bulk
  upload rules should be configured.</p>
  </td>
  <td style="width: 139.25pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="343" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/blk-upload/ingestion-conf/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/blk-upload/load-conf/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 98.65pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="122" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Data enrichment</p>
  </td>
  <td style="width: 229.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="242" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Data enrichment is primarily about aggregating data to hourly and/or
  daily values with min, max, sum, count, average, lastval, percentile functions.&nbsp; If your reports need data to be
  pre-aggregated, you should define data enrichment rules.</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The enrichment function also allows to forecast data, which is
  typically used to identify the days to reach a particular threshold value, or
  simply to know the metric value at a future point in time. Linear forecast is
  applied, wherein the forecast value is computed using the standard linear
  equation y=mx+c.</p>
  </td>
  <td style="width: 139.25pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="343" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/enrichment/hourly/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/enrichment/daily/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/enrichment/forecast/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 98.65pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="122" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Roll up</p>
  </td>
  <td style="width: 229.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="242" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">If your reports need a custom data roll-up (e.g. counting all events
  of a particular severity), then it can be achieved through custom roll up
  scripts, which are essentially custom SQLs embedded in a Perl script
  submitted to Vertica.</p>
  </td>
  <td style="width: 139.25pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="343" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/roll-up/perl/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/roll-up/task/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/roll-up/task-flow/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 98.65pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="122" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Data retention</p>
  </td>
  <td style="width: 229.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="242" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Data of different granularity should be retained for different
  durations, for example, daily metrics for a year, raw metrics for a week
  etc.&nbsp; You should define the data
  retention profile for your different data sets. &nbsp;If you don’t specify data retention, then
  the global retention will apply if you have set it.</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Note: The deletes are hard deletes, so it is not possible to recover
  the records once deleted.</p>
  </td>
  <td style="width: 139.25pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="343" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/retention/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
</tbody></table></div><div><h3><span lang="EN-AU">Step 3: Define the metric
collection rules</span></h3>

<p class="MsoNormal">The Collection Service can:</p><ul><li>Collect metrics from all supported Operations Agent versions.</li><li>Collect from agents running on all supported operating systems.</li><li>Collect data for all Management Packs or Connectors which log metrics to the agent’s Performance Collection Component.</li><li>Collect summarized data for all agent supported summary levels.</li><li>Collect at a highest frequency of 5 minutes (recommended default is one hour).</li><li>Collect data for a configurable initial history or maximum history after a time gap.</li></ul></div><div><p class="MsoNormal">The metric collection definition is a JSON file you create
in the /opr/integration/collection/oa/&lt;content name&gt; folder
location.&nbsp; It contains these fields which
are all mandatory:</p><p class="MsoNormal"><br></p><table class="MsoTableGrid" style="width: 479.7pt; border-left: none;" width="0" cellspacing="0" cellpadding="0" border="1">
 <tbody><tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:19.35pt">
  <td style="width: 124.4pt; border-width: 1pt; border-left-style: solid; border-color: windowtext; border-image: initial; padding: 0in 5.4pt; height: 19.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Field name</b></p>
  </td>
  <td style="width: 355.3pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-left: none; padding: 0in 5.4pt; height: 19.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Description</b></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:1;height:19.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 19.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">name</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 19.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The name field uniquely identifies a particular collection definition</p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:2;height:18.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 18.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">node_selection_details</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 18.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The list of nodes from which to collect data can be fetched either
  from the RTSM by specifying a TQL or from one or more files manually updated
  by the user or both. If both are used, then they are combined and
  de-duplicated. You can specify maximum of 2000 nodes per collection. If you
  have more than 2000 nodes, we recommend to split the collection.</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The node list file must be placed in the NFS location specified in
  the collection definition. It is read periodically for updates. </p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Note: The nodes can be fetched from the RTSM for OBM running in the
  container-based environment only.</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The node list file format is one hostname or IP address per line. The
  node list file should be present in the same location where custom content
  zip is present. i.e., &lt;conf volume&gt;/content-administration/var/content-administration/content/custom</p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:3;height:19.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 19.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">collection_interval_mins</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 19.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The collection interval can be multiple of 5 minutes, with 60 minutes
  recommended.</p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:4;height:18.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 18.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">initial_history_mins</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 18.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The starting time of history collection, when collecting for the
  first time.&nbsp; For example, if you
  specify 10080 minutes (1 week) then the first time the metrics are collected
  from the agent the Collection Service will collect the last week of metric
  values and then the delta thereafter.</p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:5;height:19.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 19.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">max_history_mins</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 19.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The starting time of history collection, when collecting after a time
  gap.&nbsp; For example, if you specify 360
  minutes then if the Collection Service has been unable to collect metrics
  from an agent for a period of time then it will collect a maximum of the last
  6 hours and then the delta thereafter.</p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:6;height:18.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 18.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">datasource</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 18.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The agent data source from which to collect metrics. &nbsp;You can see a list of data sources on an
  agent by running <span style="font-family:&quot;Courier New&quot;">ovcodautil -showds</span>.</p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:7;height:19.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 19.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">class_name</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 19.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The class names in the selected data source from which to collect
  metrics.&nbsp; You can see a list of classes
  and their metrics for each data source by running <span style="font-family:
  &quot;Courier New&quot;">ovcodautil -obj</span> on an agent.</p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:8;height:18.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 18.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">class_metric_list</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 18.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The list of metrics to collect, from the data source and class
  selected. </p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:9;height:19.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 19.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">alias</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 19.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Used to create duplicate file copies per class. Multiple aliases can
  be defined. </p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:10;mso-yfti-lastrow:yes;height:18.35pt">
  <td style="width: 124.4pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt; height: 18.35pt;" width="166" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">summary_level_mins</p>
  </td>
  <td style="width: 355.3pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt; height: 18.35pt;" width="474" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">The summarization level to be used for the data collection per class.
  &nbsp;This leverages the Operations Agent
  functionality to summarize delta, gauge and counter types correctly.</p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal">Each collection definition will result in spawning a new
Agent Metric Collector container instance.</p><p class="MsoNormal">To horizontally scale for a large number of nodes, you can
duplicate a collection definition each with a subset of nodes defined in the
TQL and/or node list file.</p><p class="MsoNormal">The Collection Service writes the collected data to a
content configured output directory in a CSV file format.&nbsp; This data is uploaded to the COSO Data Lake using
the bulk upload rules defined by the content. </p><h3><span lang="EN-AU">Step 4: Create BVD reports</span></h3><p class="MsoNormal">Business Value Dashboard is well documented. The <span class="MsoHyperlink"><a href="https://docs.microfocus.com/itom/Business_Value_Dashboard:2019.05/ReleaseNotes">documentation
section</a></span> provides all the details required to create a Business Value
Dashboard. </p><p class="MsoNormal">BVD reports can be pre-created, included in the content, and
configured using the <span style="font-family:&quot;Courier New&quot;">content-service.sh</span>
CLI provided by the Content Administration Service.</p><p class="MsoNormal">The BVD dashboards can be made part of the COSO Data Lake content
by exporting the dashboards and data collectors using the bvd-cli command and placing
exported file in the folder location opr/integration/bvd/dashboard/&lt;content
name&gt;.</p><p class="MsoNormal"><span lang="EN-AU">NOTE: You
can use Bring Your Own Business Intelligence (BYOBI) tools (MS Power BI,
Tableau, Qlik, etc.) to access the COSO Data Lake data for reporting and business
intelligence (BI) needs with 3rd-party tools.</span></p><h3><span lang="EN-AU">Step 5: Package the content
artifacts</span></h3><p class="MsoNormal">

















</p><p class="MsoNormal">The COSO Data Lake content must adhere to a well-known
folder structure as shown in this table.&nbsp;</p><p class="MsoNormal"><br></p><table class="MsoTableGrid" style="border-left: none;" cellspacing="0" cellpadding="0" border="1">
 <tbody><tr>
  <td style="width: 134.75pt; border-width: 1pt; border-left-style: solid; border-color: windowtext; border-image: initial; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Artifact</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
  <td style="width: 332.75pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-left: none; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Folder Location</p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Schema metadata</b></p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/metadata/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Data enrichment rules</b></p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/enrichment/hourly/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/enrichment/daily/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/enrichment/forecast/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Data retention rules</b></p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/retention/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Data custom roll up rules</b></p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/roll-up/perl/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/roll-up/task/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/roll-up/task-flow/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal;tab-stops:205.15pt">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Data bulk upload rules</b></p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/blk-upload/ingestion-conf/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/coso/blk-upload/load-conf/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal;tab-stops:233.0pt">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Metric collection definition</b></p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/collection/oa/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>BVD dashboards</b></p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">/opr/integration/bvd/dashboard/&lt;content name&gt;</p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">&nbsp;</p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal">To create new content, create one or more of the above
mentioned artifacts, and create a ZIP file. </p><p class="MsoNormal">For configuring content that is not part of the
out-of-the-box content set:</p><ul><li>Put
 the content ZIP file in the &lt;conf 
volume&gt;/content-administration/var/content-administration/content/custom
 directory.&nbsp; For example:&nbsp;</li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><p class="MsoNormal">/var/vols/itom/conf/content-administration/var/content-administration/content/custom/</p></div></blockquote></blockquote><div><ul><li>Ensure
 the file ownership is set to the same SYSTEM_USER_ID and 
SYSTEM_GROUP_ID specified for the NFS directory owner, which is 1999 and
 1999 by default.&nbsp; For example:</li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><p class="MsoNormal">chown 1999:1999 myContent.zip</p></div></blockquote></blockquote><div><ul><li>Log in to the Content Administration Service container as follows:</li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><p class="MsoNormal">Run the following command to get the opsbridge namespace and the content-administration pod names:</p></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><p class="MsoNormal">kubectl get pods --all-namespaces | grep content-administration</p></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><p class="MsoNormal">Log in to the content-administration container:</p></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><p class="MsoNormal">kubectl exec -ti &lt;content-administration pod&gt; -c content-administration -n &lt;namespace&gt; bash</p></div></blockquote></blockquote></blockquote><div><ul><li>Execute the content configuration CLI ./opsb-content-service.sh as described below</li></ul><div><b style="text-indent: -0.25in;"><span style="font-size:10.5pt;line-height:107%;
font-family:&quot;Arial&quot;,sans-serif;mso-fareast-font-family:&quot;Times New Roman&quot;;
color:#333333">Usage:</span></b></div><div><p><code>opsb-content-service.sh COMMAND [OPTIONS]</code>
</p><p><code>&nbsp;[configure|reconfigure|unconfigure|easyconfigure] -configuration_types &lt;conf_types&gt; -category &lt;all | &lt;name&gt;&gt;</code>
</p><p><code>&nbsp;[start|stop|restart|status] -collection_types oa [-all | -collection_name &lt;name&gt;]</code>
</p><p><code>&nbsp;[configure|reconfigure|unconfigure|start|stop|restart|status] -endpoint &lt;ep&gt; -dataset &lt;file&gt;</code>
</p>
<h2><span class="mw-headline" id="Commands">Commands</span></h2>

<tbody><tr>
<td><b>Commands</b>
</td>
<td><b>Description</b>
</td></tr>
<tr>
<td>configure
</td>
<td>Configure user provided type(s)
<p>Supported types: metadata, retention, enrichment, bvd, roll-up,  blk-upload.
</p>
</td></tr>
<tr>
<td>reconfigure&nbsp;&nbsp;
</td>
<td>Update already existing configuration.
<p>Supported types: metadata, retention, enrichment, bvd, roll-up,  blk-upload.
</p>
</td></tr>
<tr>
<td>unconfigure
</td>
<td>Delete the configuration if available.
<p>Supported types: retention, roll-up, blk-upload.
</p>
</td></tr>
<tr>
<td>easyconfigure&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</td>
<td>Configure user passed type(s), update if already configured.
<p>Supported types: metadata, retention, enrichment, bvd, roll-up, blk-upload.
</p>
</td></tr>
<tr>
<td>start
</td>
<td>Start Agent Metric collection for all available configurations. If <code>-collection_name</code> is passed, only the specified collection is started.
</td></tr>
<tr>
<td>status&nbsp;
</td>
<td>Display the current status of all available configurations. If <code>-collection_name</code> is passed, the status of the specified collection is displayed.
</td></tr>
<tr>
<td>stop
</td>
<td>Stop Agent Metric collection for all running collections. If <code>-collection_name</code> is passed, only the specified collection is stopped.
</td></tr>
<tr>
<td>restart&nbsp;&nbsp;
</td>
<td>Restart Agent Metric collection for all configured collections. If <code>-collection_name</code> is passed, only the specified collection is restarted.
</td></tr></tbody>
<h2><span class="mw-headline" id="Options">Options</span></h2>

<tbody><tr>
<td><b>Options</b>
</td>
<td><b>Desctiption</b>
</td></tr>
<tr>
<td>configuration_types
</td>
<td>Enables users to run the command on the given type(s)  (endpoint-COSO/BVD).
<p>Supported types: metadata, retention, enrichment, bvd, roll-up, blk-upload, and all (separated with commas).
</p><p>The 'all' option will configure all supported configuration types.
</p>
</td></tr>
<tr>
<td>category
</td>
<td>Folder name where category-specific configurations are  available (only with -configuration_types).
<p>For example: ADD EXAMPLES 
</p>
</td></tr>
<tr>
<td>collection_types
</td>
<td>Enables users to run the command on the given type(s)  (endpoint-CO).
<p>Supported types: oa and all.
</p><p>The 'all' option will configure all supported configuration types.
</p>
</td></tr>
<tr>
<td>collection_name&nbsp;&nbsp;
</td>
<td>Specify collection on which the user wants to run the given command (only with -collection_types).
</td></tr>
<tr>
<td>all&nbsp;&nbsp;&nbsp;&nbsp;
</td>
<td>Apply user passed command  (start|stop|restart|status) for all 'oa' configurations.
</td></tr>
<tr>
<td>dataset&nbsp;&nbsp;
</td>
<td>Content file name (absolute path) which needs to be configured at the given endpoint (COSO/CO).
</td></tr>
<tr>
<td>endpoint
</td>
<td>Target endpoint, which needs to be configured. For example:  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<p>https://itom-di-administration-svc:8443/urest/v1/itom-data-ingestion-administration/
</p>
</td></tr></tbody>
<h2><span class="mw-headline" id="Examples">Examples</span></h2>

<tr>
<th>Command
</th>
<th>Description
</th></tr>
<tr>
<td><code>./opsb-content-service.sh easyconfigure -configuration_types all -category all</code>
</td>
<td>Configures all supported configuration types for all available categories.
<p>It checks if the tables are present:
</p>
<ul><li>If they are present, it updates the schema of the tables</li><li>If they are not present it creates the tables</li></ul>
<p><b>This is the recommended option for configuring out of the box reports.</b>
</p>
</td></tr>
<tr>
<td><code>./opsb-content-service.sh configure -configuration_types all -category all</code>
</td>
<td>Configures all supported configuration types for all available categories.
<p>It does not update tables that already exist and fails if the tables are present.
</p>
</td></tr>
<tr>
<td><code>./opsb-content-service.sh reconfigure -configuration_types all -category all</code>
</td>
<td>Reconfigures all supported configuration types for all available categories.
<p>Fails if the tables are not present.
</p>
</td></tr>
<tr>
<td><code>./opsb-content-service.sh unconfigure -configuration_types all -category all</code>
</td>
<td>Unconfigures all supported configuration types for all available categories.
<p>Fails when the configurations are not present. It does not remove the schema from the COSO Data Lake.
</p>
</td></tr>
<tr>
<td><code>./opsb-content-service.sh reconfigure -configuration_types bvd -category Infra</code>
</td>
<td>Updates BVD dashboards for the Infra category.
</td></tr>
<tr>
<td><code>./opsb-content-service.sh unconfigure -configuration_types roll-up -category all</code>
</td>
<td>Deletes roll-up configuration for all categories.
</td></tr>
<tr>
<td><code>./opsb-content-service.sh start -collection_types oa -all</code>
</td>
<td>Starts collecting metrics from all nodes that are provided by TQL 
(on containerized OBM) or node list  (on containerized and 
non-containerized OBM) as defined in the <code>OOTB_AgentMetricCollection.json</code>&nbsp;file.
</td></tr>
<tr>
<td><code>./opsb-content-service.sh status -collection_types oa -all</code>
</td>
<td>Displays the status for all configured nodes.
</td></tr>
<tr>
<td><code>./opsb-content-service.sh restart -collection_types oa -collection_name OOTB_AgentMetricCollection</code>
</td>
<td>Restarts collecting metrics from all nodes that are provided by TQL 
(on containerized OBM) or node list  (on containerized and 
non-containerized OBM) as defined in the <code>OOTB_AgentMetricCollection.json</code>&nbsp;file.
</td></tr>
<tr>
<td><code>./opsb-content-service.sh stop -collection_types oa -collection_name xyz</code>
</td>
<td>Stops collecting metrics from all nodes.
</td></tr>

<td><code>./opsb-content-service.sh configure -endpoint 
https://itom-di-administration-svc:8443/urest/v1/itom-data-ingestion-administration/dataSetConfiguration
 -dataset 
/var/content-administration/content/custom/metadata/custom.json</code>
</td>
<td>Configure custom dataset at given endpoint
</td></div><h2> <span class="mw-headline" id="<span" lang="EN-AU">Modify custom content</span>&gt;<span lang="EN-AU">Modify custom content</span></h2><p class="MsoNormal"><span lang="EN-AU">The core
aspect to consider for content modification is whether a particular
configuration interface allows modification or not. Content configuration
primarily involves configuring:</span></p><ul><li><span lang="EN-AU">COSO Data Lake</span></li><li><span lang="EN-AU">Collection Service</span></li><li><span lang="EN-AU">BVD</span></li></ul><p class="MsoNormal">













































</p><p class="MsoNormal"><span lang="EN-AU">The following
changes to existing content are supported:</span></p><p class="MsoNormal"><span lang="EN-AU"><br></span></p><p class="MsoNormal"><span lang="EN-AU"></span></p><table class="MsoTableGrid" style="border-left: none;" cellspacing="0" cellpadding="0" border="1">
 <tbody><tr>
  <td style="width: 134.75pt; border-width: 1pt; border-left-style: solid; border-color: windowtext; border-image: initial; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Artifact</b></p>
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>&nbsp;</b></p>
  </td>
  <td style="width: 332.75pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-left: none; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal"><b>Modification Support </b></p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Schema metadata</p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Re-running the Metadata configuration attempts to update the current
  schema. Only addition of columns is supported.</p>
  </td>
 </tr>
 <tr>
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-image: initial; border-top: none; padding: 0in 5.4pt;" width="180" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Data enrichment rules</p>
  </td>
  <td style="width: 332.75pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0in 5.4pt;" width="444" valign="top">
  <p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal">Re-running the Data Enrichment configuration updates the existing
  enrichment rules which are applied from this point onwards. </p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:3;height:31.9pt">
  <td style="width: 134.75pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left: 1pt solid windowtext; border-right-color: windowtext; border-b