<p>Business Value Dashboards present your data in a very flexible layout for visualizing on any browser capable device.&nbsp; Within Micro Focus Network Operations Management (NOM) suite, there are several out-of-the-box data sources, such as incidents from Network Node Manager (NNMi) and device configuration and vulnerability from Network Automation (NA).&nbsp; These data sources can be streamed to BVD when integration is enabled.&nbsp;&nbsp; However, the current NOM Suite does not have a built-in performance metrics data sources for BVD.&nbsp; This article will demonstrate how to build a solution to achieve this with a concrete use case.</p>

<p><strong>Use Case Description</strong>:&nbsp; Due to the COVID-19 outbreak, Company A is requesting all its employees to work from home.&nbsp; The company is conducting a network stress test to make sure its network infrastructure is capable of providing sufficient bandwidth.&nbsp; They want to use NOM Suite to perform the test and stream the results to BVD.</p>

<p><strong>Use Case Implementation:</strong> The use story was implemented in the following three steps</p>

<ol>
	<li>Determine the metrics to be collected for the test,</li>
	<li>Configure NNMi to collect these metrics,</li>
	<li>Create a script to retrieve the collected metrics from NNMi NPS and stream them to a BVD dashboard.</li>
</ol>

<p>Details for each steps are described below:<br>
<br>
<strong>Step 1 - Determine the metrics to be collected&nbsp; </strong><br>
After some investigation of the devices, it was determined that the following metrics need to be collected to understand the devices’ current “stress level”:</p>

<ol>
	<li>The number of concurrent session on a company’s firewall server. This number indicates how many employees are concurrently connected to the company’s VPN.</li>
	<li>CPU utilization of the router behind the firewall server</li>
	<li>Interface utilization of the router behind the firewall server.</li>
</ol>

<p>The number of concurrent session is not part of NNMi standard polling metrics.&nbsp; After reviewing the SNMP MIB on the firewall server (Cisco Adaptive Security Appliance Version 9.12(2)5), the MIB variable cfwConnectionStatValue.40.6 (OID:1.3.6.1.4.1.9.9.147.1.2.2.2.1.3.40.6) was found to contain the number of concurrent session.<br>
For devices other than this particular Cisco Security Appliance, proceed in an similar way: examine the device’s MIB, identify the MIB variable(s) that describe current device load or capacity, and take note of the corresponding OID.<br>
CPU and Interface utilizations are part of NNMi standard performance polling and don’t need to be configured through custom polling.&nbsp;<br>
<br>
<strong>Step 2 - Configure NNMi to collect the metrics</strong><br>
The MIB variable identified in Step 1, cfwConnectionStatValue, is not part of NNMi’s standard SNMP polling.&nbsp; NNMi provides a feature called “Custom Poller” which allows users to collect non-standard MIB variables.&nbsp;<br>
Create a custom poller “ConcurrentSessionPoller” as shown below:<br>
<br>
<img alt="" border="0" hspace="0" src="/mediawiki/images/pn_images/pn_image_5e7041259a60c0.12181320.png" style="border:0px solid black; height:286px; margin-bottom:0px; margin-left:0px; margin-right:0px; margin-top:0px; width:400px" vspace="0"></p>

<p>(The details of creating a custom poller is not covered in this article.&nbsp; Instructions can be found <a href="https://docs.microfocus.com/NNMi/10.30/Content/Administer/nmAdminHelp/nmAdmConfCP0200CreateCPCol.htm">here</a>)<br>
This custom poller will be polling the number of concurrent session from the firewall server every 5 minutes and store data in the NPS server.<br>
To limit the impact of polling for CPU and Interface utilizations on all devices, create a node group “COVID-19” containing only those devices of interest for this use case: the firewall server and the router:</p>

<p>&nbsp;</p>
